<?xml version="1.0" encoding= "UTF-8" ?>
<!DOCTYPE mapper
PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
"http://mybatis.org/dtd/mybatis-3-mapper.dtd" >

<mapper namespace="project.list">
	<select id="getTotalProjectNo" resultType="int">
    <![CDATA[
   		select count(*) from Project;
    ]]>  
    </select>
    
    <select id="getProjectList" parameterType="hashmap" resultType="com.nbreds.projectPlanning.Project.VO.Project">
    <![CDATA[
	   	SELECT pno, pname, pdetail, pdata, pduedate, uno
		FROM Project
		ORDER BY pno DESC
		LIMIT #{pageNo}, #{rowsPerPage};
    ]]>  
    </select>
    
    <select id="getProjectByPno" parameterType="int" resultType="com.nbreds.projectPlanning.Project.VO.Project">
    <![CDATA[
     select pno, pname, pdetail, pdata, pduedate, uno from Project where pno=#{pno};
    ]]>  
    </select>
    
   	<delete id="removeProject" parameterType="int">
    <![CDATA[
    delete from Project where pno = #{pno};
    ]]>  
    </delete>
    
    <update id="updateProject" parameterType="com.nbreds.projectPlanning.Project.VO.Project">
    <![CDATA[
    UPDATE Project SET
	    pname = #{pname},
		pdetail = #{pdetail},
		pdata=#{pdata},
		pduedate=#{pduedate}
	WHERE pno = #{pno}
	]]> 
    </update>
        
    <select id="getUserForNo" parameterType="int" resultType="com.nbreds.projectPlanning.common.VO.User">
    <![CDATA[
    select uno, uname, uphoneno, udepartment, uemail, uposition
    from User
    where uno=#{uno}
    ]]>  
    </select>
    
    <select id="getCodeTable" parameterType="String" resultType="com.nbreds.projectPlanning.common.VO.CodeTable">
    <![CDATA[
     select CODE_TYPE, CODE, CODE_NAME from CodeTable where CODE_TYPE=#{CODE_TYPE}
    ]]>  
    </select>
    
    <select id="getUsersForName" parameterType="String" resultType="com.nbreds.projectPlanning.common.VO.User">
    <![CDATA[
    select uno, uname, uphoneno, udepartment, uemail, uposition
    from User
    where uname like '%' #{uname} '%'
    ]]>  
    </select>
</mapper>